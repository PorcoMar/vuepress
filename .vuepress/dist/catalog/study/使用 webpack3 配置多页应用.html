<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PorcoMar Site | ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨</title>
    <meta name="description" content="ğŸ§œâ€ Settle DUO in a golden house~ğŸ‘º">
    <link rel="shortcut icon" type="image/x-icon" href="https://gitee.com/uploads/6/1023506_PorcoMar.png?1500276509&quot; rel=&quot;shortcut icon">
    <meta name="description" content="hello">
    <link rel="preload" href="/assets/css/7.styles.1b77f7e7.css" as="style"><link rel="preload" href="/assets/js/app.4c437b04.js" as="script"><link rel="preload" href="/assets/js/0.2f1ede6d.js" as="script"><link rel="prefetch" href="/assets/js/3.21286c12.js"><link rel="prefetch" href="/assets/js/1.1f797a14.js"><link rel="prefetch" href="/assets/js/2.1f27290e.js"><link rel="prefetch" href="/assets/js/4.019dfaec.js"><link rel="prefetch" href="/assets/js/5.8fce801d.js"><link rel="prefetch" href="/assets/js/6.f0b910a5.js">
    <link rel="stylesheet" href="/assets/css/7.styles.1b77f7e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      PorcoMar Site
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/catalog/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/catalog/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://gitee.com/PorcoMar/projects" target="_blank" rel="noopener noreferrer" class="nav-link">Gitee</a></div><div class="nav-item"><a href="https://github.com/PorcoMar?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/catalog/study/" class="nav-link router-link-active">Study</a></div><div class="nav-item"><a href="/catalog/about/" class="nav-link">About</a></div><div class="nav-item"><a href="https://gitee.com/PorcoMar/projects" target="_blank" rel="noopener noreferrer" class="nav-link">Gitee</a></div><div class="nav-item"><a href="https://github.com/PorcoMar?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link">Github</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>å¼€å‘ç¬”è®°</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/catalog/study/" class="sidebar-link">vuePressè¯´æ˜</a></li><li><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html" class="active sidebar-link">ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#å®‰è£…ä¾èµ–" class="sidebar-link">å®‰è£…ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#é…ç½®æ–‡ä»¶åˆ’åˆ†" class="sidebar-link">é…ç½®æ–‡ä»¶åˆ’åˆ†</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹" class="sidebar-link">é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#è‡ªåŠ¨ç”Ÿæˆ-html-é¡µé¢" class="sidebar-link">è‡ªåŠ¨ç”Ÿæˆ HTML é¡µé¢</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#html-webpack-plugin-æ’ä»¶çš„ä½¿ç”¨" class="sidebar-link">html-webpack-plugin æ’ä»¶çš„ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#ç›®å½•åˆ’åˆ†" class="sidebar-link">ç›®å½•åˆ’åˆ†</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#package-json" class="sidebar-link">package.json</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#å¯ç”¨ç¯å¢ƒ" class="sidebar-link">å¯ç”¨ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#webpack-config-dev-js" class="sidebar-link">webpack.config.dev.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#é…ç½®-eslintrc-js" class="sidebar-link">é…ç½® .eslintrc.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#package-json-2" class="sidebar-link">package.json</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#gitignore" class="sidebar-link">.gitignore</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#eslintrc-js" class="sidebar-link">.eslintrc.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#postcss-config-js" class="sidebar-link">postcss.config.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#config-js" class="sidebar-link">config.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#webpack-config-js" class="sidebar-link">webpack.config.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#webpack-config-dev-js-2" class="sidebar-link">webpack.config.dev.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#webpack-config-prod-js" class="sidebar-link">webpack.config.prod.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#webpack-config-lint-js" class="sidebar-link">webpack.config.lint.js</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#é¡¹ç›®ç»“æ„" class="sidebar-link">é¡¹ç›®ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/catalog/study/ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨.html#æ³¨é‡Šï¼š" class="sidebar-link">æ³¨é‡Šï¼š</a></li></ul></li><li><a href="/catalog/study/Markdownå†™æ³•.html" class="sidebar-link">Markdown è¯­æ³•</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="ä½¿ç”¨-webpack3-é…ç½®å¤šé¡µåº”ç”¨"><a href="#ä½¿ç”¨-webpack3-é…ç½®å¤šé¡µåº”ç”¨" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨ webpack3 é…ç½®å¤šé¡µåº”ç”¨</h1><p>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ webpack æ„å»ºå¤šé¡µåº”ç”¨å‘¢ï¼Ÿå› ä¸ºæŸäº›é¡¹ç›®ä½¿ç”¨ SPA ä¸å¤ªåˆé€‚ï¼ˆå¤§å¤šæ˜¯ SEO çš„åŸå› ï¼‰ï¼Œæˆ–è€…æ‚¨åœ¨åšé¡¹ç›®æ—¶æœ‰å…¶ä»–çš„éœ€æ±‚ã€‚
å¦‚æœä½ æœ‰å¦‚ä¸‹éœ€æ±‚ï¼š</p><ul><li>ä½¿ç”¨ ES6 è¿›è¡Œå¼€å‘</li><li>æœŸæœ›ä½¿ç”¨é¢å‘å¯¹è±¡å¼€å‘ï¼ˆclassï¼‰</li><li>è‡ªåŠ¨å‹ç¼©åˆå¹¶ CSS å’Œ JS æ–‡ä»¶</li><li>ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥</li><li>è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶</li><li>è‡ªåŠ¨æŠ½å– CSS æ–‡ä»¶ ...</li></ul><p>æœ‰äº†è¿™äº›éœ€æ±‚ï¼ŒåŸºæœ¬ä¸Šå°±å¿…é¡»ä½¿ç”¨ <code>webpack</code> äº†ã€‚</p><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" aria-hidden="true" class="header-anchor">#</a> å®‰è£…ä¾èµ–</h2><p>é¦–å…ˆæ˜¯é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨çš„ä¾èµ–å®‰è£…ã€‚</p><ol><li><p>å®‰è£… webpack å’Œ webpack-dev-server</p><pre><code> npm install webpack webpack-dev-server --save-dev
</code></pre></li><li><p>å®‰è£… webpack-merge</p><pre><code> npm install webpack-merge --save-dev
</code></pre></li></ol><p>è¯¥æ’ä»¶ç”¨æ¥å¯¹ webpack é…ç½®è¿›è¡Œåˆå¹¶æ“ä½œã€‚</p><ol start="3"><li><p>å®‰è£… babel ç›¸å…³æ’ä»¶</p><pre><code> npm install babel-core babel-loader babel-preset-env --save-dev
</code></pre></li></ol><p>è¿™ç³»åˆ—æ’ä»¶ç”¨æ¥å¯¹ ES6 è¯­æ³•è¿›è¡Œè½¬æ¢ã€‚</p><ol start="4"><li><p>å®‰è£…æ ·å¼å¤„ç†ç›¸å…³æ’ä»¶</p><pre><code> npm install css-loader style-loader postcss-loader autoprefixer --save-dev
</code></pre></li></ol><p>è¿™ç³»åˆ—æ’ä»¶ç”¨æ¥å¤„ç† CSS æ ·å¼ï¼Œå…¶ä¸­ autoprefixer æ˜¯ postcss çš„ä¸€ä¸ªæ’ä»¶ï¼Œç”¨æ¥è‡ªåŠ¨ç»™ CSS æ ·å¼æ·»åŠ å‰ç¼€ã€‚</p><ol start="5"><li>å®‰è£… file-loader</li></ol><p>è¯¥æ’ä»¶å°†åœ¨å¯¼å…¥å›¾ç‰‡ã€å­—ä½“ç­‰æ–‡ä»¶æ—¶å‘æŒ¥ä½œç”¨ã€‚PS.æ‚¨ä¹Ÿå¯ä»¥å®‰è£… url-loader ä»¥å®ç°ç›¸åŒçš„ä½œç”¨ï¼š</p><pre><code>    npm install file-loader --save-dev

    npm install url-loader --save-dev
</code></pre><ol start="6"><li><p>å®‰è£… ESLint ç›¸å…³çš„æ’ä»¶</p><pre><code> npm install eslint eslint-loader --save-dev
</code></pre></li></ol><p>è¿™äº›æ’ä»¶ç”¨æ¥å¯¹ JavaScript ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚</p><ol start="7"><li><p>å®‰è£… html-webpack-plugin æ’ä»¶</p><pre><code> npm install html-webpack-plugin --save-dev
</code></pre></li></ol><p>è¯¥æ’ä»¶ç”¨æ¥è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶ã€‚</p><ol start="8"><li><p>å®‰è£… extract-text-webpack-plugin æ’ä»¶</p><pre><code> npm install extract-text-webpack-plugin --save-dev
</code></pre></li></ol><p>è¯¥æ’ä»¶ç”¨æ¥å°† CSS æŠ½å–åˆ°ç‹¬ç«‹çš„æ–‡ä»¶ã€‚</p><ol start="9"><li><p>å®‰è£… clean-webpack-plugin æ’ä»¶</p><pre><code> npm install clean-webpack-plugin --save-dev
</code></pre></li></ol><p>è¯¥æ’ä»¶ç”¨æ¥å¯¹ dist æ–‡ä»¶å¤¹è¿›è¡Œæ¸…ç†å·¥ä½œï¼Œæ¯æ¬¡æ‰“åŒ…æ—¶å…ˆæ¸…ç†ä¹‹å‰çš„ dist æ–‡ä»¶å¤¹ã€‚</p><h4 id="ä¸‹é¢æ˜¯è¿™äº›å®‰è£…äº†çš„æ‰€æœ‰ä¾èµ–ï¼š"><a href="#ä¸‹é¢æ˜¯è¿™äº›å®‰è£…äº†çš„æ‰€æœ‰ä¾èµ–ï¼š" aria-hidden="true" class="header-anchor">#</a> ä¸‹é¢æ˜¯è¿™äº›å®‰è£…äº†çš„æ‰€æœ‰ä¾èµ–ï¼š</h4><pre><code>    ...
      &quot;devDependencies&quot;: {
        &quot;autoprefixer&quot;: &quot;^7.1.3&quot;,
        &quot;babel-core&quot;: &quot;^6.26.0&quot;,
        &quot;babel-loader&quot;: &quot;^7.1.2&quot;,
        &quot;babel-preset-env&quot;: &quot;^1.6.0&quot;,
        &quot;clean-webpack-plugin&quot;: &quot;^0.1.16&quot;,
        &quot;css-loader&quot;: &quot;^0.28.7&quot;,
        &quot;eslint&quot;: &quot;^4.6.1&quot;,
        &quot;eslint-loader&quot;: &quot;^1.9.0&quot;,
        &quot;extract-text-webpack-plugin&quot;: &quot;^3.0.0&quot;,
        &quot;file-loader&quot;: &quot;^0.11.2&quot;,
        &quot;html-webpack-plugin&quot;: &quot;^2.30.1&quot;,
        &quot;postcss-loader&quot;: &quot;^2.0.6&quot;,
        &quot;style-loader&quot;: &quot;^0.18.2&quot;,
        &quot;url-loader&quot;: &quot;^0.5.9&quot;,
        &quot;webpack&quot;: &quot;^3.5.5&quot;,
        &quot;webpack-dev-server&quot;: &quot;^2.7.1&quot;,
        &quot;webpack-merge&quot;: &quot;^4.1.0&quot;
      },
    ...
</code></pre><h2 id="é…ç½®æ–‡ä»¶åˆ’åˆ†"><a href="#é…ç½®æ–‡ä»¶åˆ’åˆ†" aria-hidden="true" class="header-anchor">#</a> é…ç½®æ–‡ä»¶åˆ’åˆ†</h2><p>ä½¿ç”¨ webpack è¿›è¡Œé¡¹ç›®æ„å»ºæ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸åŒçš„ç›®çš„ï¼Œå› æ­¤æœ€å¥½å°†é…ç½®æ–‡ä»¶è¿›è¡Œæ‹†åˆ†ï¼Œä»¥é€‚åº”ä¸åŒçš„å·¥ä½œï¼š</p><pre><code>    â”œâ”€config
    â”‚      config.js
    â”‚      webpack.config.base.js
    â”‚      webpack.config.dev.js
    â”‚      webpack.config.lint.js
    â”‚      webpack.config.prod.js
    â”‚  webpack.config.js
</code></pre><h4 id="ä¸‹é¢æ˜¯ä¸€äº›é…ç½®çš„è¯´æ˜ï¼š"><a href="#ä¸‹é¢æ˜¯ä¸€äº›é…ç½®çš„è¯´æ˜ï¼š" aria-hidden="true" class="header-anchor">#</a> ä¸‹é¢æ˜¯ä¸€äº›é…ç½®çš„è¯´æ˜ï¼š</h4><pre><code>    config.jsï¼šä¸€äº›å…¨å±€çš„é…ç½®ï¼Œæ¯”å¦‚ HTML æ–‡ä»¶çš„è·¯å¾„ã€publicPath ç­‰
    webpack.config.base.jsï¼šæœ€åŸºç¡€çš„é…ç½®æ–‡ä»¶
    webpack.config.dev.jsï¼šå¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶
    webpack.config.lint.jsï¼šä½¿ç”¨ ESLint ä»£ç æ£€æŸ¥æ—¶çš„é…ç½®æ–‡ä»¶
    webpack.config.prod.jsï¼šç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
    webpack.config.jsï¼šä¸»é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®ç¯å¢ƒå˜é‡å¼•ç”¨ç›¸åº”çš„ç¯å¢ƒçš„é…ç½®
</code></pre><p>è¿™äº›é…ç½®æ–‡ä»¶ä¹‹é—´æ˜¯é€šè¿‡ webpack-merge è¿™ä¸ªæ’ä»¶è¿›è¡Œåˆå¹¶çš„ã€‚</p><h2 id="é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹"><a href="#é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹" aria-hidden="true" class="header-anchor">#</a> é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹</h2><p>å¦‚ä½•ä½¿ç”¨ webpack é…ç½®å¤šé¡µé¢åº”ç”¨å‘¢ï¼Ÿå®ç°å¤šé¡µé¢åº”ç”¨çš„å…³é”®ç‚¹åœ¨å“ªé‡Œå‘¢ï¼Ÿé¦–å…ˆéœ€è¦ç®€å•çœ‹ä¸€ä¸‹å¤šé¡µåº”ç”¨å’Œå•é¡µåº”ç”¨åŠŸèƒ½çš„åŒºåˆ«ã€‚</p><h4 id="å•é¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š"><a href="#å•é¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š" aria-hidden="true" class="header-anchor">#</a> å•é¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š</h4><p>åªæœ‰ä¸€ä¸ªå…¥å£é¡µé¢ï¼ˆindex.htmlï¼‰
è¿™ä¸ªå•é¡µé¡µé¢ï¼ˆindex.htmlï¼‰ä¸­éœ€è¦å¼•å…¥æ‰“åŒ…åçš„æ‰€æœ‰ JavaScript æ–‡ä»¶
æ‰€æœ‰çš„é¡µé¢å†…å®¹å®Œå…¨ç”± JavaScript ç”Ÿæˆ
å•é¡µåº”ç”¨æœ‰è‡ªå·±çš„è·¯ç”±ç³»ç»Ÿï¼ŒæœåŠ¡å™¨ç«¯æ²¡æœ‰å’Œè·¯ç”±å¯¹åº”çš„æ–‡ä»¶
Â·Â·Â·</p><h4 id="å¤šé¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š"><a href="#å¤šé¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š" aria-hidden="true" class="header-anchor">#</a> å¤šé¡µåº”ç”¨çš„ç‰¹ç‚¹ï¼š</h4><p>æ¯ä¸ªç‰ˆå—å¯¹åº”ä¸€ä¸ªé¡µé¢
æ¯ä¸ªé¡µé¢éœ€è¦å¯¹å…¬å…±çš„ JavaScript è¿›è¡Œå¼•å…¥
æ¯ä¸ªé¡µé¢è¿˜éœ€è¦å¼•å…¥å’Œå…¶è‡ªèº«å¯¹åº”çš„ JavaScript æ–‡ä»¶
ç”±äºå¯¹åº”äº†å¤šä¸ªé¡µé¢ï¼Œå› æ­¤ä¸æ˜¯æ‰€æœ‰é¡µé¢å†…å®¹éƒ½æ˜¯ç”± JavaScript ç”Ÿæˆçš„
æ²¡æœ‰è‡ªå·±çš„è·¯ç”±ç³»ç»Ÿï¼ŒæœåŠ¡å™¨ç«¯æœ‰å¯¹åº”çš„é™æ€æ–‡ä»¶
Â·Â·Â·
æŠ›å¼€ç”Ÿæˆé¡µé¢å†…å®¹å’Œè·¯ç”±ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å•é¡µåº”ç”¨å’Œå¤šé¡µåº”ç”¨æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š</p><p>å•é¡µåº”ç”¨éœ€è¦åœ¨å…¥å£é¡µé¢å¼•å…¥æ‰€æœ‰çš„ JavaScript æ–‡ä»¶
å¤šé¡µåº”ç”¨éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­å¼•å…¥å…¬å…±çš„ JavaScript æ–‡ä»¶ä»¥åŠå…¶è‡ªèº«çš„ JavaScript æ–‡ä»¶
ç”±äº CSS æ–‡ä»¶æ˜¯å¯ä»¥ç”± extract-text-webpack-plugin è¿™ä¸ªæ’ä»¶è‡ªåŠ¨æå–å¹¶æ’å…¥åˆ° HTML é¡µé¢çš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å…³å¿ƒå¦‚ä½•åœ¨ HTML é¡µé¢ä¸­å¼•å…¥ JavaScript æ–‡ä»¶äº†ã€‚
webpack åœ¨æ‰“åŒ…æ—¶ï¼Œä¼šå°†å…¥å£æ–‡ä»¶ä¸­çš„ JavaScript æ–‡ä»¶æ‰“åŒ…åˆ°æŸä¸ªç›®æ ‡æ–‡ä»¶ä¸­ï¼Œåœ¨ä¸è€ƒè™‘ä»£ç åˆ†å‰²æå–çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå…¥å£æ–‡ä»¶ä¼šæ‰“åŒ…ä¸ºä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œå¤šä¸ªå…¥å£æ–‡ä»¶ä¼šæ‰“åŒ…ä¸ºå¤šä¸ªå¯¹åº”çš„ç›®æ ‡æ–‡ä»¶ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªå¤šé¡µé¡µé¢ä¸­çš„ç‰¹æœ‰çš„ JavaScript æ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œåœ¨æ‰“åŒ…æ—¶å°†å¯¹åº”æ‰“åŒ…æˆä¸åŒçš„ bundle æ–‡ä»¶ï¼ˆç»“æœæ–‡ä»¶ï¼‰ï¼Œå¦‚æœä½ æƒ³è¦çš„è¯ï¼Œè¿˜å¯ä»¥åœ¨æ‰“åŒ…æ—¶è¿›è¡Œä»£ç åˆ†å‰²å¤„ç†ï¼Œå°†å…¬ç”¨ä»£ç æŠ½å–æˆä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨ HTML ä¸­å¼•å…¥è¿™äº› JavaScript æ–‡ä»¶å°±å¥½äº†ã€‚
æ€»ç»“ä¸€ä¸‹ï¼Œä½¿ç”¨ webpack é…ç½®å¤šé¡µåº”ç”¨çš„å…³é”®ç‚¹åœ¨äºï¼š</p><p>å°†æ¯ä¸ªé¡µé¢ä¸­ç‰¹æœ‰çš„ JavaScript æ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶è¿›è¡Œæ‰“åŒ…
åœ¨æ‰“åŒ…åï¼Œæ¯ä¸ªé¡µé¢ä¸­éƒ½éœ€è¦å¼•å…¥è¿™äº›æ‰“åŒ…åçš„æ–‡ä»¶
æ‚¨å¯ä»¥åœ¨æ‰“åŒ…æ—¶è¿›è¡Œå…¬ç”¨ä»£ç æå–ï¼Œç„¶ååœ¨ HTML æ–‡ä»¶ä¸­å¼•å…¥
è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®å°±æ˜¯åˆ©ç”¨äº† webpack å¤šå…¥å£æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ã€‚</p><h2 id="è‡ªåŠ¨ç”Ÿæˆ-html-é¡µé¢"><a href="#è‡ªåŠ¨ç”Ÿæˆ-html-é¡µé¢" aria-hidden="true" class="header-anchor">#</a> è‡ªåŠ¨ç”Ÿæˆ HTML é¡µé¢</h2><p>åœ¨ä½¿ç”¨ webpack å¯¹ JavaScript æ–‡ä»¶è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œé€šå¸¸éœ€è¦åœ¨æ‰“åŒ…çš„æ–‡ä»¶åä¸­åŠ ä¸€ä¸ª hash å­—ç¬¦ä¸²ç”¨æ¥é˜²æ­¢ç¼“å­˜ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº† JavaScript ä»£ç åï¼Œæ‰“åŒ…åçš„æ–‡ä»¶åä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚æ­¤æ—¶å¦‚æœæ‰‹åŠ¨åœ¨ HTML ä¸­å¼•ç”¨è¿™äº› JavaScript æ–‡ä»¶ï¼Œæ˜¯éå¸¸éº»çƒ¦çš„ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬æœŸæœ›èƒ½è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å¼•ç”¨æ‰“åŒ…åçš„ JavaScript æ–‡ä»¶ã€‚æ‰€è°“è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºå°†æºä»£ç çš„ HTML å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­ï¼ŒåŒæ—¶è‡ªåŠ¨å¼•ç”¨æ‰“åŒ…åçš„ JavaScript æ–‡ä»¶ã€‚
è¦å®Œæˆè¿™é¡¹æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨å‰é¢å®‰è£…çš„ html-webpack-plugin è¿™ä¸ªæ’ä»¶ã€‚</p><h2 id="html-webpack-plugin-æ’ä»¶çš„ä½¿ç”¨"><a href="#html-webpack-plugin-æ’ä»¶çš„ä½¿ç”¨" aria-hidden="true" class="header-anchor">#</a> html-webpack-plugin æ’ä»¶çš„ä½¿ç”¨</h2><p>é¦–å…ˆï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€äº› HTML é¡µé¢ï¼Œå°†å®ƒä»¬æ”¾åœ¨ html æ–‡ä»¶å¤¹ä¸­ï¼š</p><pre><code>    Mode                LastWriteTime         Length Name
    ----                -------------         ------ ----
    -a----         2017/9/5     18:04           1071 company_intro.html
    -a----         2017/9/5     18:04            988 contact_us.html
    -a----         2017/9/5     18:04           1131 cooperate.html
    -a----         2017/9/5     18:04           1244 enterprise_culture.html
    -a----         2017/9/5     18:04           1011 hornors.html
    -a----         2017/9/5     18:04           1365 index.html
    -a----         2017/9/5     18:04           1769 investment.html
    -a----         2017/9/5     18:04           1005 join_us.html
    -a----         2017/9/5     18:04           1037 news_center.html
    -a----         2017/9/5     18:04            987 news_item.html
    -a----         2017/9/5     18:04           1134 operate.html
    -a----         2017/9/5     18:04           1255 product.html
    -a----         2017/9/5     18:04           1132 schools.html
</code></pre><p>ç„¶åï¼ŒæŠŠè¿™äº› HTML æ–‡ä»¶åï¼ˆä¸è¦åç¼€ï¼‰éƒ½å†™åœ¨ config.js æ–‡ä»¶ä¸­ï¼Œä»¥ä¾›å–ç”¨ï¼š</p><pre><code>    module.exports = {
        HTMLDirs:[
            &quot;index&quot;,
            &quot;company_intro&quot;,
            &quot;enterprise_culture&quot;,
            &quot;hornors&quot;,
            &quot;news_center&quot;,
            &quot;news_item&quot;,
            &quot;product&quot;,
            &quot;schools&quot;,
            &quot;operate&quot;,
            &quot;cooperate&quot;,
            &quot;join_us&quot;,
            &quot;contact_us&quot;,
            &quot;investment&quot;
        ],
    }
</code></pre><p>HTMLDirs æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ä¿å­˜äº†é¡¹ç›®ä¸­ä¼šç”¨åˆ°çš„æ‰€æœ‰ HTML é¡µé¢ã€‚
æ¥ä¸‹æ¥ï¼Œæ¯ä¸ª HTML é¡µé¢éƒ½å¯¹åº”ä¸€ä»½ JavaScript ä»£ç ï¼Œå› æ­¤åœ¨ js æ–‡ä»¶å¤¹ä¸­å»ºç«‹å¯¹åº”çš„ JavaScript æ–‡ä»¶ï¼š</p><pre><code>    Mode                LastWriteTime         Length Name
    ----                -------------         ------ ----
    -a----         2017/9/5     18:04           2686 company_intro.js
    -a----         2017/9/5     18:04            594 contact_us.js
    -a----         2017/9/5     18:04           1725 cooperate.js
    -a----         2017/9/8     16:54           3505 enterprise_culture.js
    -a----         2017/9/5     18:04           2208 hornors.js
    -a----         2017/9/8     16:54           4491 index.js
    -a----         2017/9/5     18:04           3180 investment.js
    -a----         2017/9/5     18:04           1327 join_us.js
    -a----         2017/9/8     16:55           3689 news_center.js
    -a----         2017/9/5     18:04           1972 news_item.js
    -a----         2017/9/5     18:04           2728 operate.js
    -a----         2017/9/5     18:04           2664 product.js
    -a----         2017/9/5     18:04           2476 schools.js
</code></pre><p>è¿™ä¸¤é¡¹æ˜¯å¿…é¡»çš„ï¼Œåªæœ‰æä¾›äº†æ¯ä¸ªé¡µé¢çš„ HTML æ–‡ä»¶å’Œå¯¹åº”çš„ JavaScript æ–‡ä»¶ï¼Œæ‰èƒ½æ„å»ºå¤šé¡µé¢åº”ç”¨ã€‚
åŒæ—¶ï¼Œå¯èƒ½æ¯ä¸ªé¡µé¢éƒ½æœ‰è‡ªå·±çš„æ ·å¼ï¼Œå› æ­¤æ‚¨ä¹Ÿå¯ä»¥åœ¨ css æ–‡ä»¶å¤¹ä¸­å»ºç«‹ä¸€äº›æ ·å¼æ–‡ä»¶ï¼š</p><pre><code>    Mode                LastWriteTime         Length Name
    ----                -------------         ------ ----
    -a----         2017/9/5     18:04            419 company_intro.css
    -a----         2017/9/5     18:04            167 contact_us.css
    -a----         2017/9/5     18:04            214 cooperate.css
    -a----         2017/9/5     18:04            926 enterprise_culture.css
    -a----         2017/9/5     18:04            255 hornors.css
    -a----         2017/9/5     18:04            693 investment.css
    -a----         2017/9/5     18:04            136 join_us.css
    -a----         2017/9/5     18:04            541 news_center.css
    -a----         2017/9/5     18:04            623 news_item.css
    -a----         2017/9/5     18:04            342 operate.css
    -a----         2017/9/5     18:04            236 product.css
    -a----         2017/9/5     18:04            213 schools.css
</code></pre><p>å…³äºå»ºç«‹æ ·å¼è¿™ä¸€é¡¹ï¼Œä¸æ˜¯å¿…é¡»çš„ã€‚
æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ html-webpack-plugin è¿™ä¸ªæ’ä»¶æ¥è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶äº†ï¼Œhtml-webpack-plugin æ’ä»¶çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code>    // å¼•å…¥æ’ä»¶
    const HTMLWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
    // å¼•å…¥å¤šé¡µé¢æ–‡ä»¶åˆ—è¡¨
    const { HTMLDirs } = require(&quot;./config&quot;);
    // é€šè¿‡ html-webpack-plugin ç”Ÿæˆçš„ HTML é›†åˆ
    let HTMLPlugins = [];
    // å…¥å£æ–‡ä»¶é›†åˆ
    let Entries = {}

    // ç”Ÿæˆå¤šé¡µé¢çš„é›†åˆ
    HTMLDirs.forEach((page) =&gt; {
        const htmlPlugin = new HTMLWebpackPlugin({
            filename: `${page}.html`,
            template: path.resolve(__dirname, `../app/html/${page}.html`),
            chunks: [page, 'commons'],
        });
        HTMLPlugins.push(htmlPlugin);
        Entries[page] = path.resolve(__dirname, `../app/js/${page}.js`);
    })
</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆå¼•å…¥äº†æ‰€éœ€çš„æ’ä»¶å’Œå˜é‡ï¼Œç„¶ååˆ©ç”¨ html-webpack-plugin å¾ªç¯ç”Ÿæˆ HTML é¡µé¢ã€‚
ç®€å•è¯´ä¸‹ HTMLWebpackPlugin æ„é€ å‡½æ•°çš„å‡ ä¸ªå‚æ•°ï¼š</p><p>filenameï¼šç”Ÿæˆçš„ HTML æ–‡ä»¶åï¼Œæˆ‘è¿™é‡Œé€‰æ‹©å’ŒåŸå§‹æ–‡ä»¶åä¿æŒä¸€è‡´
templateï¼šç”Ÿæˆ HTML æ–‡ä»¶ä½¿ç”¨çš„æ¨¡æ¿ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨ html æ–‡ä»¶å¤¹ä¸­å»ºç«‹çš„é‚£äº›æ–‡ä»¶
chunksï¼šç”Ÿæˆ HTML æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨æ’å…¥ç›¸åº”çš„ä»£ç ç‰‡æ®µï¼ˆä¹Ÿå°±æ˜¯ JavaScript æ–‡ä»¶ï¼‰ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©æ’å…¥æ¯ä¸ªé¡µé¢å¯¹åº”çš„ JavaScript æ–‡ä»¶ï¼Œä»¥åŠæœ€åæå–å‡ºæ¥çš„å…¬å…±æ–‡ä»¶ä»£ç å—ã€‚
å…³äº chunks è¿˜éœ€è¦è¯´æ˜ä¸€ç‚¹ï¼Œchunks æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨ç”Ÿæˆ HTML æ–‡ä»¶æ—¶ä¼šå°†æ•°ç»„ä¸­çš„å¯¹åº”çš„ JavaScript ç‰‡æ®µè‡ªåŠ¨æ’å…¥åˆ° HTML ä¸­ï¼Œè¿™äº›ç‰‡æ®µä¹Ÿå°±æ˜¯ webpack æ‰“åŒ…æ—¶çš„ output é€‰é¡¹ä¸­çš„ [name]ã€‚è¿™é‡Œåªéœ€è¦å†™ä¸Š [name] å€¼å°±è¡Œäº†ï¼Œæ— éœ€ä½¿ç”¨æ‰“åŒ…ç”Ÿæˆçš„å®Œæ•´åç§°ï¼Œå› ä¸ºè¿™ä¼šè¿˜æ²¡å¼€å§‹æ‰“åŒ…å‘¢ï¼Œæ‰“åŒ…åç”Ÿæˆçš„åç§°å’±ä¹Ÿä¸çŸ¥é“ã€‚
æœ€åï¼Œæˆ‘ä»¬æŠŠè¿™äº›ç”Ÿæˆ HTML æ–‡ä»¶çš„é…ç½®æ’å…¥åˆ° HTMLPlugins è¿™ä¸ªæ•°ç»„ä¸­ï¼ŒåŒæ—¶è®¾ç½® webpack çš„å…¥å£æ–‡ä»¶ã€‚</p><h2 id="ç›®å½•åˆ’åˆ†"><a href="#ç›®å½•åˆ’åˆ†" aria-hidden="true" class="header-anchor">#</a> ç›®å½•åˆ’åˆ†</h2><p>åœ¨è¿™ä¸ªè„šæ‰‹æ¶ä¸­ï¼Œæˆ‘æ˜¯è¿™æ ·åˆ’åˆ†é¡¹ç›®ç»“æ„çš„ï¼š</p><pre><code>    â”œâ”€app
    â”‚  â”œâ”€css
    â”‚  â”œâ”€html
    â”‚  â”œâ”€img
    â”‚  â”œâ”€js
    â”‚  â””â”€lib
    â”œâ”€config
    â””â”€dist
        â”œâ”€css
        â”œâ”€img
        â””â”€js
    å…¶ä¸­ app æ˜¯é¡¹ç›®çš„æºç ï¼Œconfig æ˜¯ webpack ç›¸å…³çš„ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œdist æ˜¯å­˜æ”¾æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œæ˜¯ç”± webpack è‡ªåŠ¨ç”Ÿæˆçš„ã€‚
    æ›´è¯¦ç»†çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

    â”‚  .babelrc
    â”‚  .eslintrc.js
    â”‚  .gitignore
    â”‚  package.json
    â”‚  postcss.config.js
    â”‚  webpack.config.js
    â”‚  
    â”œâ”€app
    â”‚  â”‚  favicon.ico
    â”‚  â”‚  
    â”‚  â”œâ”€css
    â”‚  â”‚      main.css
    â”‚  â”‚      
    â”‚  â”œâ”€html
    â”‚  â”‚      index.html
    â”‚  â”‚    
    â”‚  â”‚      
    â”‚  â”œâ”€img
    â”‚  â”‚      back.png
    â”‚  â”‚      
    â”‚  â”œâ”€js
    â”‚  â”‚      ajax.js
    â”‚  â”‚      footer.js
    â”‚  â”‚      index.js
    â”‚  â”‚      nav.js
    â”‚  â”‚      public.js
    â”‚  â”‚      tity_nav.js
    â”‚  â”‚      
    â”‚  â””â”€lib
    â”‚        flexible.js
    â”‚        normalize.css
    â”‚        swiper.css
    â”‚        swiper.js
    â”‚        
    â””â”€config
            config.js
            webpack.config.base.js
            webpack.config.dev.js
            webpack.config.lint.js
            webpack.config.prod.js
</code></pre><h2 id="package-json"><a href="#package-json" aria-hidden="true" class="header-anchor">#</a> package.json</h2><p>æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯ä» package.json çš„ scripts å…¥å£å¼€å§‹æ‰§è¡Œçš„ï¼Œæˆ‘æƒ³è¦è„šæ‰‹æ¶æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li><p>å¼€å‘ç¯å¢ƒæ„å»º</p></li><li><p>ç”Ÿäº§ç¯å¢ƒæ„å»º</p></li><li><p>ESLint ä»£ç æ£€æŸ¥ç¯å¢ƒ</p></li><li><p>ç”Ÿäº§ç¯å¢ƒæ„å»ºåçš„æœåŠ¡å™¨é¢„è§ˆç¯å¢ƒ</p></li><li><p>åœ¨å¼€å‘æˆ–ä»£ç æ£€æŸ¥ç¯å¢ƒï¼Œéœ€è¦å¯ç”¨ webpack-dev-server å‘½ä»¤ï¼Œç”Ÿäº§ç¯å¢ƒæ„å»ºéœ€è¦å¯ç”¨ webpack å‘½ä»¤ï¼Œé¢„è§ˆç¯å¢ƒéœ€è¦å¯ç”¨ http-server ç¯å¢ƒã€‚</p></li><li><p>ä¸Šæ–‡ä»‹ç»æ—¶æŠŠ http-server ç»™è½ä¸‹äº†ï¼Œæ‚¨ç°åœ¨å¯ä»¥è¿›è¡Œå¦‚ä¸‹å®‰è£…ï¼š</p><pre><code>  npm install http-server --save-dev
</code></pre></li></ul><p>scripts å‘½ä»¤è¡Œé…ç½®å¦‚ä¸‹ï¼š</p><pre><code>      &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;set NODE_ENV=dev &amp;&amp; webpack-dev-server --open&quot;,
        &quot;build&quot;: &quot;set NODE_ENV=prod &amp;&amp; webpack -p&quot;,
        &quot;lint&quot;: &quot;set NODE_ENV=lint &amp;&amp; webpack-dev-server --open&quot;,
        &quot;serve&quot;: &quot;http-server ./dist -p 8888 -o&quot;,
        &quot;serve2&quot;: &quot;http-server ./dist -p 8888&quot;
      },
</code></pre><p>ä¸‹é¢æ˜¯æ•´ä¸ª package.json æ–‡ä»¶ï¼š</p><pre><code>    {
      &quot;name&quot;: &quot;xxx&quot;,
      &quot;version&quot;: &quot;1.0.0&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;main&quot;: &quot;index.js&quot;,
      &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;set NODE_ENV=dev &amp;&amp; webpack-dev-server --open&quot;,
        &quot;build&quot;: &quot;set NODE_ENV=prod &amp;&amp; webpack -p&quot;,
        &quot;lint&quot;: &quot;set NODE_ENV=lint &amp;&amp; webpack-dev-server --open&quot;,
        &quot;serve&quot;: &quot;http-server ./dist -p 8888 -o&quot;,
        &quot;serve2&quot;: &quot;http-server ./dist -p 8888&quot;
      },
      &quot;author&quot;: &quot;&quot;,
      &quot;license&quot;: &quot;ISC&quot;,
      &quot;devDependencies&quot;: {
        &quot;autoprefixer&quot;: &quot;^7.1.3&quot;,
        &quot;babel-core&quot;: &quot;^6.26.0&quot;,
        &quot;babel-loader&quot;: &quot;^7.1.2&quot;,
        &quot;babel-plugin-transform-es2015-spread&quot;: &quot;^6.22.0&quot;,
        &quot;babel-preset-env&quot;: &quot;^1.6.0&quot;,
        &quot;clean-webpack-plugin&quot;: &quot;^0.1.16&quot;,
        &quot;css-loader&quot;: &quot;^0.28.7&quot;,
        &quot;eslint&quot;: &quot;^4.5.0&quot;,
        &quot;eslint-loader&quot;: &quot;^1.9.0&quot;,
        &quot;extract-text-webpack-plugin&quot;: &quot;^3.0.0&quot;,
        &quot;file-loader&quot;: &quot;^0.11.2&quot;,
        &quot;html-webpack-plugin&quot;: &quot;^2.30.1&quot;,
        &quot;http-server&quot;: &quot;^0.10.0&quot;,
        &quot;postcss-loader&quot;: &quot;^2.0.6&quot;,
        &quot;style-loader&quot;: &quot;^0.18.2&quot;,
        &quot;url-loader&quot;: &quot;^0.5.9&quot;,
        &quot;webpack&quot;: &quot;^3.5.5&quot;,
        &quot;webpack-dev-server&quot;: &quot;^2.7.1&quot;,
        &quot;webpack-merge&quot;: &quot;^4.1.0&quot;
      },
      &quot;dependencies&quot;: {}
    }
</code></pre><h2 id="å¯ç”¨ç¯å¢ƒ"><a href="#å¯ç”¨ç¯å¢ƒ" aria-hidden="true" class="header-anchor">#</a> å¯ç”¨ç¯å¢ƒ</h2><p>å¦‚æœæ‚¨æƒ³å¯ç”¨æŸä¸ªç¯å¢ƒï¼Œéœ€è¦ä½¿ç”¨ npm run xxx å‘½ä»¤ï¼š</p><ul><li>npm run devï¼šè¿›å…¥å¼€å‘ç¯å¢ƒ</li><li>npm run buildï¼šè¿›å…¥ç”Ÿäº§ç¯å¢ƒ</li><li>npm run lintï¼šæ‰§è¡Œä»£ç æ£€æŸ¥</li><li>npm run serveï¼šæœåŠ¡å™¨ç¯å¢ƒä¸‹é¢„è§ˆï¼ˆæ‰“å¼€æµè§ˆå™¨ï¼‰</li><li>npm run serve2ï¼šæœåŠ¡å™¨ç¯å¢ƒä¸‹é¢„è§ˆï¼ˆä¸æ‰“å¼€æµè§ˆå™¨ï¼‰
é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿™äº›å‘½ä»¤éƒ½ä¼šå…ˆå¼•å…¥å’Œ package.js åŒç›®å½•ä¸‹çš„ webpack.config.js æ–‡ä»¶ã€‚ç”±äºæˆ‘ä»¬ä¸ä¼šå°†æ‰€æœ‰çš„é…ç½®éƒ½æ”¾åœ¨ webpack.config.js ä¸­ï¼Œè€Œæ˜¯è¿‡ç¯å¢ƒå˜é‡è¿›è¡ŒåŒºåˆ†ï¼Œåœ¨ webpack.config.js ä¸­å¼•ç”¨å…¶ä»–çš„é…ç½®æ–‡ä»¶ã€‚
è®¾ç½®ç¯å¢ƒå˜é‡é‡‡ç”¨çš„è¯­æ³•ï¼š</li></ul><p>set NODE_ENV=xxx
è¿™é‡Œæˆ‘ä»¬ä¸ºå¼€å‘ã€ç”Ÿäº§ã€ä»£ç æ£€æŸ¥å’Œé¢„è§ˆè¿™å‡ ä¸ªç¯å¢ƒè®¾ç½®äº†ç¯å¢ƒå˜é‡ã€‚</p><ul><li><p>webpack.config.js</p></li><li><p>webpack.config.js æ–‡ä»¶æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸¤è¡Œä»£ç ï¼Œå…¶ä½œç”¨å°±æ˜¯ç”¨æ¥å¼•ç”¨å…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼š</p><pre><code>  // è·å–ç¯å¢ƒå‘½ä»¤ï¼Œå¹¶å»é™¤é¦–å°¾ç©ºæ ¼
  const env = process.env.NODE_ENV.replace(/(\s*$)|(^\s*)/ig,&quot;&quot;);
  // æ ¹æ®ç¯å¢ƒå˜é‡å¼•ç”¨ç›¸å…³çš„é…ç½®æ–‡ä»¶
  module.exports = require(`./config/webpack.config.${env}.js`)
  webpack.config.base.js
</code></pre></li></ul><p>webpack.config.base.js æ˜¯æœ€åŸºç¡€çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†è¿™äº›ç¯å¢ƒéƒ½å¯èƒ½ä½¿ç”¨åˆ°çš„é…ç½®ã€‚</p><h4 id="_1ï¼‰ç›¸å…³æ’ä»¶å¼•å…¥"><a href="#_1ï¼‰ç›¸å…³æ’ä»¶å¼•å…¥" aria-hidden="true" class="header-anchor">#</a> 1ï¼‰ç›¸å…³æ’ä»¶å¼•å…¥</h4><hr><pre><code>    const path = require(&quot;path&quot;);
    // å¼•å…¥æ’ä»¶
    const HTMLWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
    // æ¸…ç† dist æ–‡ä»¶å¤¹
    const CleanWebpackPlugin = require(&quot;clean-webpack-plugin&quot;)
    // æŠ½å– css
    const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);
</code></pre><h4 id="_2ï¼‰è‡ªåŠ¨ç”Ÿæˆ-html-çš„é…ç½®"><a href="#_2ï¼‰è‡ªåŠ¨ç”Ÿæˆ-html-çš„é…ç½®" aria-hidden="true" class="header-anchor">#</a> 2ï¼‰è‡ªåŠ¨ç”Ÿæˆ HTML çš„é…ç½®</h4><pre><code>    // å¼•å…¥å¤šé¡µé¢æ–‡ä»¶åˆ—è¡¨
    const config = require(&quot;./config&quot;);
    // é€šè¿‡ html-webpack-plugin ç”Ÿæˆçš„ HTML é›†åˆ
    let HTMLPlugins = [];
    // å…¥å£æ–‡ä»¶é›†åˆ
    let Entries = {}

    // ç”Ÿæˆå¤šé¡µé¢çš„é›†åˆ
    config.HTMLDirs.forEach((page) =&gt; {
        const htmlPlugin = new HTMLWebpackPlugin({
            filename: `${page}.html`,
            template: path.resolve(__dirname, `../app/html/${page}.html`),
            chunks: [page, 'commons'],
        });
        HTMLPlugins.push(htmlPlugin);
        Entries[page] = path.resolve(__dirname, `../app/js/${page}.js`);
    })
</code></pre><h4 id="_3ï¼‰ä¸»é…ç½®æ–‡ä»¶ä¸€è§ˆ"><a href="#_3ï¼‰ä¸»é…ç½®æ–‡ä»¶ä¸€è§ˆ" aria-hidden="true" class="header-anchor">#</a> 3ï¼‰ä¸»é…ç½®æ–‡ä»¶ä¸€è§ˆ</h4><pre><code>    module.exports = {
        // å…¥å£æ–‡ä»¶
        entry:Entries,
        // å¯ç”¨ sourceMap
        devtool:&quot;cheap-module-source-map&quot;,
        // è¾“å‡ºæ–‡ä»¶
        output:{},
        // åŠ è½½å™¨
        module:{
            rules:[
            ],
        },
        // æ’ä»¶
        plugins:[],
    }
</code></pre><h4 id="_4ï¼‰é…ç½®-css-åŠ è½½å™¨"><a href="#_4ï¼‰é…ç½®-css-åŠ è½½å™¨" aria-hidden="true" class="header-anchor">#</a> 4ï¼‰é…ç½® css åŠ è½½å™¨</h4><pre><code>    {
        // å¯¹ css åç¼€åè¿›è¡Œå¤„ç†
        test:/\.css$/,
        // ä¸å¤„ç† node_modules æ–‡ä»¶ä¸­çš„ css æ–‡ä»¶
        exclude: /node_modules/,
        // æŠ½å– css æ–‡ä»¶åˆ°å•ç‹¬çš„æ–‡ä»¶å¤¹
        use: ExtractTextPlugin.extract({
            fallback: &quot;style-loader&quot;,
            // è®¾ç½® css çš„ publicPath
            publicPath: config.cssPublicPath,
            use: [{
                    loader:&quot;css-loader&quot;,
                    options:{
                        // å¼€å¯ css å‹ç¼©
                        minimize:true,
                    }
                },
                {
                    loader:&quot;postcss-loader&quot;,
                }
            ]
        })
    },
</code></pre><p>è¿™é‡Œæœ‰ä¸¤ç‚¹éœ€è¦è¯´æ˜ï¼š
A.publicPathï¼šåœ¨ css ä¸­è®¾ç½®èƒŒæ™¯å›¾åƒçš„ url æ—¶ï¼Œç»å¸¸ä¼šæ‰¾ä¸åˆ°å›¾ç‰‡ï¼ˆé»˜è®¤ä¼šåœ¨ css æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾ï¼‰ï¼Œè¿™é‡Œè®¾ç½® extract-text-webpack-plugin æ’ä»¶çš„ publicPath ä¸ºå›¾ç‰‡æ–‡ä»¶å¤¹æ‰€åœ¨çš„ç›®å½•ï¼Œå°±å¯ä»¥é¡ºåˆ©æ‰¾åˆ°å›¾ç‰‡äº†ã€‚
åœ¨ config.js ä¸­ï¼Œè®¾ç½® cssPublicPath çš„å€¼ï¼š</p><p>cssPublicPath:&quot;../&quot;
B.postcss æˆ‘ä¸»è¦ç”¨æ¥è‡ªåŠ¨æ·»åŠ  css å‰ç¼€ä»¥åŠä¸€ç‚¹ç¾åŒ–æ“ä½œï¼Œåœ¨ä½¿ç”¨ postcss æ—¶ï¼Œéœ€è¦åœ¨ postcss.config.js ä¸­è¿›è¡Œé…ç½®ï¼š</p><pre><code>    module.exports = {  
      plugins: {  
        'autoprefixer': {
            browsers: ['last 5 version','Android &gt;= 4.0'],
            //æ˜¯å¦ç¾åŒ–å±æ€§å€¼ é»˜è®¤ï¼štrue 
            cascade: true,
            //æ˜¯å¦å»æ‰ä¸å¿…è¦çš„å‰ç¼€ é»˜è®¤ï¼štrue 
            remove: true
        }  
      }  
    }  
</code></pre><h4 id="_5ï¼‰é…ç½®-js-åŠ è½½å™¨"><a href="#_5ï¼‰é…ç½®-js-åŠ è½½å™¨" aria-hidden="true" class="header-anchor">#</a> 5ï¼‰é…ç½® js åŠ è½½å™¨</h4><p>js åŠ è½½å™¨çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
            loader: 'babel-loader',
            options: {
                presets: ['env']
            }
        }
    },
</code></pre><h4 id="_6ï¼‰é…ç½®å›¾ç‰‡åŠ è½½å™¨"><a href="#_6ï¼‰é…ç½®å›¾ç‰‡åŠ è½½å™¨" aria-hidden="true" class="header-anchor">#</a> 6ï¼‰é…ç½®å›¾ç‰‡åŠ è½½å™¨</h4><p>å›¾ç‰‡åŠ è½½å™¨çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    {
        test: /\.(png|svg|jpg|gif)$/,
        use:{
            loader:&quot;file-loader&quot;,
            options:{
                // æ‰“åŒ…ç”Ÿæˆå›¾ç‰‡çš„åå­—
                name:&quot;[name].[ext]&quot;,
                // å›¾ç‰‡çš„ç”Ÿæˆè·¯å¾„
                outputPath:config.imgOutputPath
            }
        }
    },
</code></pre><p>outputPath è§„å®šäº†è¾“å‡ºå›¾ç‰‡çš„ä½ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡åœ¨æ‰“åŒ…æ—¶ä¼šå’Œæ‰€æœ‰çš„ HTML/CSS/JS æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œé€šè¿‡è®¾ç½® outputPath å€¼å¯ä»¥å°†æ‰€æœ‰çš„å›¾ç‰‡éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚
è®¾ç½® config.js çš„ imgOutputPathï¼š</p><p>imgOutputPath:&quot;img/&quot;,
åœ¨æ‰“åŒ…æ—¶ï¼Œä¼šå°†æ‰€æœ‰çš„å›¾ç‰‡æ‰“åŒ…åˆ° dist æ–‡ä»¶å¤¹ä¸‹çš„ img æ–‡ä»¶å¤¹ä¸­ã€‚</p><h4 id="_7ï¼‰é…ç½®è‡ªå®šä¹‰å­—ä½“åŠ è½½å™¨"><a href="#_7ï¼‰é…ç½®è‡ªå®šä¹‰å­—ä½“åŠ è½½å™¨" aria-hidden="true" class="header-anchor">#</a> 7ï¼‰é…ç½®è‡ªå®šä¹‰å­—ä½“åŠ è½½å™¨</h4><p>è‡ªå®šä¹‰å­—ä½“åŠ è½½å™¨çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    {
        test: /\.(woff|woff2|eot|ttf|otf)$/,
        use:[&quot;file-loader&quot;]
    }
</code></pre><h4 id="_8ï¼‰æ’ä»¶é…ç½®"><a href="#_8ï¼‰æ’ä»¶é…ç½®" aria-hidden="true" class="header-anchor">#</a> 8ï¼‰æ’ä»¶é…ç½®</h4><p>æ’ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    plugins:[
        // è‡ªåŠ¨æ¸…ç† dist æ–‡ä»¶å¤¹
        new CleanWebpackPlugin([&quot;dist&quot;]),
        // å°† css æŠ½å–åˆ°æŸä¸ªæ–‡ä»¶å¤¹
        new ExtractTextPlugin(config.cssOutputPath),        
        // è‡ªåŠ¨ç”Ÿæˆ HTML æ’ä»¶
        ...HTMLPlugins
    ],
</code></pre><p>åŒæ‰“åŒ…å›¾ç‰‡ï¼Œåœ¨æŠ½å– css æ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæŠ½å–çš„ç›®å½•ï¼Œåªéœ€å°†è·¯å¾„ä¼ å…¥ extract-text-webpack-plugin æ’ä»¶çš„æ„é€ å‡½æ•°ä¸­ã€‚
é…ç½® config.js çš„ cssOutputPath é€‰é¡¹ï¼š</p><p>cssOutputPath:&quot;./css/styles.css&quot;,
è¿™é‡Œå°†æ‰€æœ‰çš„ css æå–åˆ° dist æ–‡ä»¶å¤¹ä¸‹çš„ css æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶å‘½åä¸º style.cssã€‚</p><p>webpack.config.base.js è¯¦ç»†é…ç½®</p><p>ä¸‹é¢æ˜¯ webpack.config.base.js çš„è¯¦ç»†é…ç½®æ–‡ä»¶ï¼š</p><pre><code>      const path = require(&quot;path&quot;);
      // å¼•å…¥æ’ä»¶
      const HTMLWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
      // æ¸…ç† dist æ–‡ä»¶å¤¹
      const CleanWebpackPlugin = require(&quot;clean-webpack-plugin&quot;)
      // æŠ½å– css
      const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);
      // å¼•å…¥å¤šé¡µé¢æ–‡ä»¶åˆ—è¡¨
      const config = require(&quot;./config&quot;);
      // é€šè¿‡ html-webpack-plugin ç”Ÿæˆçš„ HTML é›†åˆ
      let HTMLPlugins = [];
      // å…¥å£æ–‡ä»¶é›†åˆ
      let Entries = {}

      // ç”Ÿæˆå¤šé¡µé¢çš„é›†åˆ
      config.HTMLDirs.forEach((page) =&gt; {
          const htmlPlugin = new HTMLWebpackPlugin({
              filename: `${page}.html`,
              template: path.resolve(__dirname, `../app/html/${page}.html`),
              chunks: [page, 'commons'],
          });
          HTMLPlugins.push(htmlPlugin);
          Entries[page] = path.resolve(__dirname, `../app/js/${page}.js`);
      })

      module.exports = {
          entry:Entries,
          devtool:&quot;cheap-module-source-map&quot;,
          output:{
              filename:&quot;js/[name].bundle.[hash].js&quot;,
              path:path.resolve(__dirname,&quot;../dist&quot;)
          },
          // åŠ è½½å™¨
          module:{
              rules:[
                  {
                      // å¯¹ css åç¼€åè¿›è¡Œå¤„ç†
                      test:/\.css$/,
                      // ä¸å¤„ç† node_modules æ–‡ä»¶ä¸­çš„ css æ–‡ä»¶
                      exclude: /node_modules/,
                      // æŠ½å– css æ–‡ä»¶åˆ°å•ç‹¬çš„æ–‡ä»¶å¤¹
                      use: ExtractTextPlugin.extract({
                          fallback: &quot;style-loader&quot;,
                          // è®¾ç½® css çš„ publicPath
                          publicPath: config.cssPublicPath,
                          use: [{
                                  loader:&quot;css-loader&quot;,
                                  options:{
                                      // å¼€å¯ css å‹ç¼©
                                      minimize:true,
                                  }
                              },
                              {
                                  loader:&quot;postcss-loader&quot;,
                              }
                          ]
                      })
                  },
                  {
                      test: /\.js$/,
                      exclude: /node_modules/,
                      use: {
                          loader: 'babel-loader',
                          options: {
                              presets: ['env']
                          }
                      }
                  },
                  {
                      test: /\.(png|svg|jpg|gif)$/,
                      use:{
                          loader:&quot;file-loader&quot;,
                          options:{
                              // æ‰“åŒ…ç”Ÿæˆå›¾ç‰‡çš„åå­—
                              name:&quot;[name].[ext]&quot;,
                              // å›¾ç‰‡çš„ç”Ÿæˆè·¯å¾„
                              outputPath:config.imgOutputPath
                          }
                      }
                  },
                  {
                      test: /\.(woff|woff2|eot|ttf|otf)$/,
                      use:[&quot;file-loader&quot;]
                  }
              ],
          },
          plugins:[
              // è‡ªåŠ¨æ¸…ç† dist æ–‡ä»¶å¤¹
              new CleanWebpackPlugin([&quot;dist&quot;]),
              // å°† css æŠ½å–åˆ°æŸä¸ªæ–‡ä»¶å¤¹
              new ExtractTextPlugin(config.cssOutputPath),        
              // è‡ªåŠ¨ç”Ÿæˆ HTML æ’ä»¶
              ...HTMLPlugins
          ],
      }
</code></pre><h2 id="webpack-config-dev-js"><a href="#webpack-config-dev-js" aria-hidden="true" class="header-anchor">#</a> webpack.config.dev.js</h2><p>è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸»è¦ç”¨æ¥åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œéœ€è¦ webpack-dev-server è¿™ä¸ªæ’ä»¶æä¾›æ”¯æŒã€‚è¯¥æ–‡ä»¶çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    // å¼•å…¥åŸºç¡€é…ç½®æ–‡ä»¶
    const webpackBase = require(&quot;./webpack.config.base&quot;);
    // å¼•å…¥ webpack-merge æ’ä»¶
    const webpackMerge = require(&quot;webpack-merge&quot;);
    // å¼•å…¥é…ç½®æ–‡ä»¶
    const config = require(&quot;./config&quot;);
    // åˆå¹¶é…ç½®æ–‡ä»¶
    module.exports = webpackMerge(webpackBase,{
        // é…ç½® webpack-dev-server
        devServer:{
            // é¡¹ç›®æ ¹ç›®å½•
            contentBase:config.devServerOutputPath,
            // é”™è¯¯ã€è­¦å‘Šå±•ç¤ºè®¾ç½®
            overlay:{
                errors:true,
                warnings:true
            }
        }
    });
</code></pre><p>å…¶ä¸­ï¼Œwebpack-merge è¿™ä¸ªæ’ä»¶ç”¨æ¥å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œåœ¨ webpack.config.base.js çš„åŸºç¡€ä¸Šåˆå¹¶æ–°çš„é…ç½®ã€‚
devServer é…ç½®é¡¹çš„ contentBase é¡¹æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ dist ç›®å½•ï¼ŒåŒºåˆ«åœ¨äºè¿™ä¸ª dist ç›®å½•ä¸æ˜¯ç¡¬ç›˜ä¸Šçš„ dist ç›®å½•ï¼Œè€Œæ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„ dist ç›®å½•ã€‚åœ¨ä½¿ç”¨ webpack-dev-server æ—¶ï¼Œå°†ä¼šä»¥è¿™ä¸ªå†…å­˜ä¸­çš„ dist ç›®å½•ä½œä¸ºæ ¹ç›®å½•ã€‚
devServer çš„ overlay é€‰é¡¹ä¸­è®¾ç½®äº†å±•ç¤ºé”™è¯¯å’Œè­¦å‘Šï¼Œè¿™æ ·å½“ä»£ç å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šå°†é”™è¯¯ä¿¡æ¯æŠ•å°„åˆ°æµè§ˆå™¨ä¸Šï¼Œæ–¹ä¾¿æˆ‘ä»¬å¼€å‘ã€‚
è¿™é‡Œå°† contentBase æŒ‡å‘äº† config ä¸­çš„ä¸€ä¸ªé…ç½®ï¼š</p><pre><code>    devServerOutputPath:&quot;../dist&quot;,
    webpack.config.prod.js
</code></pre><p>è¯¥é…ç½®æ–‡ä»¶ç”¨æ¥åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨ï¼Œä¸»è¦ç”¨æ¥å‹ç¼©ã€åˆå¹¶å’ŒæŠ½å– JavaScript ä»£ç ï¼Œå¹¶å°†é¡¹ç›®æ–‡ä»¶æ‰“åŒ…è‡³ç¡¬ç›˜ä¸Šçš„ dist æ–‡ä»¶å¤¹ä¸­ã€‚</p><pre><code>    // å¼•å…¥åŸºç¡€é…ç½®
    const webpackBase = require(&quot;./webpack.config.base&quot;);
    // å¼•å…¥ webpack-merge æ’ä»¶
    const webpackMerge = require(&quot;webpack-merge&quot;);
    // å¼•å…¥ webpack
    const webpack = require(&quot;webpack&quot;);
    // åˆå¹¶é…ç½®æ–‡ä»¶
    module.exports = webpackMerge(webpackBase,{
        plugins:[
            // ä»£ç å‹ç¼©
            new webpack.optimize.UglifyJsPlugin({
                // å¼€å¯ sourceMap
                sourceMap: true
            }),
            // æå–å…¬å…± JavaScript ä»£ç 
            new webpack.optimize.CommonsChunkPlugin({
                // chunk åä¸º commons
                name: &quot;commons&quot;,
                filename: &quot;[name].bundle.js&quot;,
            }),
        ]
    });
</code></pre><p>åœ¨æŠ½å–å…¬å…±çš„ JavaScript ä»£ç æ—¶ï¼Œæˆ‘ä»¬å°†å…¬å…±ä»£ç æŠ½å–ä¸º commons.bundle.jsï¼Œè¿™ä¸ªå…¬å…±ä»£ç çš„ chunkï¼ˆnameï¼‰åå°±æ˜¯ commonsï¼Œåœ¨ä½¿ç”¨ html-webpack-plugin è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶æ—¶ä¼šå¼•ç”¨è¿™ä¸ª chunkã€‚</p><pre><code>    webpack.config.lint.js
</code></pre><p>è¿™é¡¹é…ç½®ç”¨æ¥è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    const webpackBase = require(&quot;./webpack.config.base&quot;);
    const webpackMerge = require(&quot;webpack-merge&quot;);
    const config = require(&quot;./config&quot;);
    module.exports = webpackMerge(webpackBase,{
        module:{
            rules:[
                {
                    test: /\.js$/,
                    // å¼ºåˆ¶å…ˆè¿›è¡Œ ESLint æ£€æŸ¥
                    enforce: &quot;pre&quot;,
                    // ä¸å¯¹ node_modules å’Œ lib æ–‡ä»¶å¤¹ä¸­çš„ä»£ç è¿›è¡Œæ£€æŸ¥
                    exclude: /node_modules|lib/,
                    loader: &quot;eslint-loader&quot;,
                    options: {
                        // å¯ç”¨è‡ªåŠ¨ä¿®å¤
                        fix:true,
                        // å¯ç”¨è­¦å‘Šä¿¡æ¯
                        emitWarning:true,
                    }
                },
            ]
        },
        devServer:{
            contentBase:config.devServerOutputPath,
            overlay:{
                errors:true,
                warnings:true
            }
        }
    });
</code></pre><p>åœ¨ä½¿ç”¨ eslint-loader æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®äº† enforce:&quot;pre&quot; é€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹è¡¨ç¤ºåœ¨å¤„ç† JavaScript ä¹‹å‰å…ˆå¯ç”¨ ESLint ä»£ç æ£€æŸ¥ï¼Œç„¶åå†ä½¿ç”¨ babel ç­‰ loader å¯¹ JavaScript è¿›è¡Œç¼–è¯‘ã€‚
åœ¨ eslint-loader çš„ options é€‰é¡¹ä¸­ï¼Œè®¾ç½®äº†è‡ªåŠ¨ä¿®å¤å’Œå¯ç”¨è­¦å‘Šä¿¡æ¯ï¼Œè¿™æ ·å½“æˆ‘ä»¬çš„ä»£ç å‡ºç°é—®é¢˜æ—¶ï¼ŒESLint ä¼šé¦–å…ˆå°è¯•è‡ªåŠ¨ä¿®å¤ï¼ˆå¦‚å°†åŒå¼•å·æ”¹ä¸ºå•å¼•å·ï¼‰ï¼Œå¯¹äºæ— æ³•è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ï¼Œå°†ä»¥è­¦å‘Šæˆ–é”™è¯¯çš„ä¿¡æ¯è¿›è¡Œå±•ç¤ºã€‚</p><h2 id="é…ç½®-eslintrc-js"><a href="#é…ç½®-eslintrc-js" aria-hidden="true" class="header-anchor">#</a> é…ç½® .eslintrc.js</h2><p>è¦æƒ³ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œé™¤äº†ä½¿ç”¨ eslint-loader ä¹‹å¤–ï¼Œè¿˜éœ€é’ˆå¯¹ ESLint æœ¬èº«è¿›è¡Œé…ç½®ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ª .eslintrc.js æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶çš„é…ç½®å¦‚ä¸‹ï¼š</p><pre><code>    module.exports = {
      env: {
        browser: true,
        commonjs: true,
        es6: true,
        node: true,
      },
      extends: 'eslint:recommended',
      parserOptions: {
        sourceType: 'module',
      },
      rules: {
        'comma-dangle': ['error', 'always-multiline'],
        indent: ['error', 2],
        'linebreak-style': ['error', 'unix'],
        quotes: ['error', 'single'],
        semi: ['error', 'always'],
        'no-unused-vars': ['warn'],
        'no-console': 0,
      },
    };
</code></pre><h2 id="package-json-2"><a href="#package-json-2" aria-hidden="true" class="header-anchor">#</a> package.json</h2><pre><code>    {
      &quot;name&quot;: &quot;xxx&quot;,
      &quot;version&quot;: &quot;1.0.0&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;main&quot;: &quot;index.js&quot;,
      &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;set NODE_ENV=dev &amp;&amp; webpack-dev-server --open&quot;,
        &quot;build&quot;: &quot;set NODE_ENV=prod &amp;&amp; webpack -p&quot;,
        &quot;lint&quot;: &quot;set NODE_ENV=lint &amp;&amp; webpack-dev-server --open&quot;,
        &quot;serve&quot;: &quot;http-server ./dist -p 8888 -o&quot;,
        &quot;serve2&quot;: &quot;http-server ./dist -p 8888&quot;
      },
      &quot;author&quot;: &quot;&quot;,
      &quot;license&quot;: &quot;ISC&quot;,
      &quot;devDependencies&quot;: {
        &quot;autoprefixer&quot;: &quot;^7.1.3&quot;,
        &quot;babel-core&quot;: &quot;^6.26.0&quot;,
        &quot;babel-loader&quot;: &quot;^7.1.2&quot;,
        &quot;babel-plugin-transform-es2015-spread&quot;: &quot;^6.22.0&quot;,
        &quot;babel-preset-env&quot;: &quot;^1.6.0&quot;,
        &quot;clean-webpack-plugin&quot;: &quot;^0.1.16&quot;,
        &quot;css-loader&quot;: &quot;^0.28.7&quot;,
        &quot;eslint&quot;: &quot;^4.5.0&quot;,
        &quot;eslint-loader&quot;: &quot;^1.9.0&quot;,
        &quot;extract-text-webpack-plugin&quot;: &quot;^3.0.0&quot;,
        &quot;file-loader&quot;: &quot;^0.11.2&quot;,
        &quot;html-webpack-plugin&quot;: &quot;^2.30.1&quot;,
        &quot;http-server&quot;: &quot;^0.10.0&quot;,
        &quot;postcss-loader&quot;: &quot;^2.0.6&quot;,
        &quot;style-loader&quot;: &quot;^0.18.2&quot;,
        &quot;url-loader&quot;: &quot;^0.5.9&quot;,
        &quot;webpack&quot;: &quot;^3.5.5&quot;,
        &quot;webpack-dev-server&quot;: &quot;^2.7.1&quot;,
        &quot;webpack-merge&quot;: &quot;^4.1.0&quot;
      },
      &quot;dependencies&quot;: {}
    }
</code></pre><h2 id="gitignore"><a href="#gitignore" aria-hidden="true" class="header-anchor">#</a> .gitignore</h2><pre><code>    node_modules
    dist
    npm-debug.log
</code></pre><p>.babelrc</p><pre><code>    {
        &quot;plugins&quot;: [&quot;transform-es2015-spread&quot;]
    }
</code></pre><h2 id="eslintrc-js"><a href="#eslintrc-js" aria-hidden="true" class="header-anchor">#</a> .eslintrc.js</h2><pre><code>    module.exports = {
      env: {
        browser: true,
        commonjs: true,
        es6: true,
        node: true,
      },
      extends: 'eslint:recommended',
      parserOptions: {
        sourceType: 'module',
      },
      rules: {
        'comma-dangle': ['error', 'always-multiline'],
        indent: ['error', 2],
        'linebreak-style': ['error', 'unix'],
        quotes: ['error', 'single'],
        semi: ['error', 'always'],
        'no-unused-vars': ['warn'],
        'no-console': 0,
      },
    };
</code></pre><h2 id="postcss-config-js"><a href="#postcss-config-js" aria-hidden="true" class="header-anchor">#</a> postcss.config.js</h2><pre><code>    module.exports = {  
      plugins: {  
        'autoprefixer': {
            browsers: ['last 5 version','Android &gt;= 4.0'],
            //æ˜¯å¦ç¾åŒ–å±æ€§å€¼ é»˜è®¤ï¼štrue 
            cascade: true,
            //æ˜¯å¦å»æ‰ä¸å¿…è¦çš„å‰ç¼€ é»˜è®¤ï¼štrue 
            remove: true
        }  
      }  
    }  
</code></pre><h2 id="config-js"><a href="#config-js" aria-hidden="true" class="header-anchor">#</a> config.js</h2><pre><code>    module.exports = {
        HTMLDirs:[
            &quot;index&quot;,
            &quot;company_intro&quot;,
            &quot;enterprise_culture&quot;,
            &quot;hornors&quot;,
            &quot;news_center&quot;,
            &quot;news_item&quot;,
            &quot;product&quot;,
            &quot;schools&quot;,
            &quot;operate&quot;,
            &quot;cooperate&quot;,
            &quot;join_us&quot;,
            &quot;contact_us&quot;,
            &quot;investment&quot;
        ],
        cssPublicPath:&quot;../&quot;,
        imgOutputPath:&quot;img/&quot;,
        cssOutputPath:&quot;./css/styles.css&quot;,
        devServerOutputPath:&quot;../dist&quot;,

    }
</code></pre><h2 id="webpack-config-js"><a href="#webpack-config-js" aria-hidden="true" class="header-anchor">#</a> webpack.config.js</h2><pre><code>    // è·å–ç¯å¢ƒå‘½ä»¤ï¼Œå¹¶å»é™¤é¦–å°¾ç©ºæ ¼
    const env = process.env.NODE_ENV.replace(/(\s*$)|(^\s*)/ig,&quot;&quot;);
    // æ ¹æ®ç¯å¢ƒå˜é‡å¼•ç”¨ç›¸å…³çš„é…ç½®æ–‡ä»¶
    module.exports = require(`./config/webpack.config.${env}.js`)
    webpack.config.base.js

    const path = require(&quot;path&quot;);
    // å¼•å…¥æ’ä»¶
    const HTMLWebpackPlugin = require(&quot;html-webpack-plugin&quot;);
    // æ¸…ç† dist æ–‡ä»¶å¤¹
    const CleanWebpackPlugin = require(&quot;clean-webpack-plugin&quot;)
    // æŠ½å– css
    const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);
    // å¼•å…¥å¤šé¡µé¢æ–‡ä»¶åˆ—è¡¨
    const config = require(&quot;./config&quot;);
    // é€šè¿‡ html-webpack-plugin ç”Ÿæˆçš„ HTML é›†åˆ
    let HTMLPlugins = [];
    // å…¥å£æ–‡ä»¶é›†åˆ
    let Entries = {}

    // ç”Ÿæˆå¤šé¡µé¢çš„é›†åˆ
    config.HTMLDirs.forEach((page) =&gt; {
        const htmlPlugin = new HTMLWebpackPlugin({
            filename: `${page}.html`,
            template: path.resolve(__dirname, `../app/html/${page}.html`),
            chunks: [page, 'commons'],
        });
        HTMLPlugins.push(htmlPlugin);
        Entries[page] = path.resolve(__dirname, `../app/js/${page}.js`);
    })

    module.exports = {
        entry:Entries,
        devtool:&quot;cheap-module-source-map&quot;,
        output:{
            filename:&quot;js/[name].bundle.[hash].js&quot;,
            path:path.resolve(__dirname,&quot;../dist&quot;)
        },
        // åŠ è½½å™¨
        module:{
            rules:[
                {
                    // å¯¹ css åç¼€åè¿›è¡Œå¤„ç†
                    test:/\.css$/,
                    // ä¸å¤„ç† node_modules æ–‡ä»¶ä¸­çš„ css æ–‡ä»¶
                    exclude: /node_modules/,
                    // æŠ½å– css æ–‡ä»¶åˆ°å•ç‹¬çš„æ–‡ä»¶å¤¹
                    use: ExtractTextPlugin.extract({
                        fallback: &quot;style-loader&quot;,
                        // è®¾ç½® css çš„ publicPath
                        publicPath: config.cssPublicPath,
                        use: [{
                                loader:&quot;css-loader&quot;,
                                options:{
                                    // å¼€å¯ css å‹ç¼©
                                    minimize:true,
                                }
                            },
                            {
                                loader:&quot;postcss-loader&quot;,
                            }
                        ]
                    })
                },
                {
                    test: /\.js$/,
                    exclude: /node_modules/,
                    use: {
                        loader: 'babel-loader',
                        options: {
                            presets: ['env']
                        }
                    }
                },
                {
                    test: /\.(png|svg|jpg|gif)$/,
                    use:{
                        loader:&quot;file-loader&quot;,
                        options:{
                            // æ‰“åŒ…ç”Ÿæˆå›¾ç‰‡çš„åå­—
                            name:&quot;[name].[ext]&quot;,
                            // å›¾ç‰‡çš„ç”Ÿæˆè·¯å¾„
                            outputPath:config.imgOutputPath
                        }
                    }
                },
                {
                    test: /\.(woff|woff2|eot|ttf|otf)$/,
                    use:[&quot;file-loader&quot;]
                }
            ],
        },
        plugins:[
            // è‡ªåŠ¨æ¸…ç† dist æ–‡ä»¶å¤¹
            new CleanWebpackPlugin([&quot;dist&quot;]),
            // å°† css æŠ½å–åˆ°æŸä¸ªæ–‡ä»¶å¤¹
            new ExtractTextPlugin(config.cssOutputPath),        
            // è‡ªåŠ¨ç”Ÿæˆ HTML æ’ä»¶
            ...HTMLPlugins
        ],
    }
</code></pre><h2 id="webpack-config-dev-js-2"><a href="#webpack-config-dev-js-2" aria-hidden="true" class="header-anchor">#</a> webpack.config.dev.js</h2><pre><code>    // å¼•å…¥åŸºç¡€é…ç½®æ–‡ä»¶
    const webpackBase = require(&quot;./webpack.config.base&quot;);
    // å¼•å…¥ webpack-merge æ’ä»¶
    const webpackMerge = require(&quot;webpack-merge&quot;);
    // å¼•å…¥é…ç½®æ–‡ä»¶
    const config = require(&quot;./config&quot;);
    // åˆå¹¶é…ç½®æ–‡ä»¶
    module.exports = webpackMerge(webpackBase,{
        // é…ç½® webpack-dev-server
        devServer:{
            // é¡¹ç›®æ ¹ç›®å½•
            contentBase:config.devServerOutputPath,
            // é”™è¯¯ã€è­¦å‘Šå±•ç¤ºè®¾ç½®
            overlay:{
                errors:true,
                warnings:true
            }
        }
    });
</code></pre><h2 id="webpack-config-prod-js"><a href="#webpack-config-prod-js" aria-hidden="true" class="header-anchor">#</a> webpack.config.prod.js</h2><pre><code>    // å¼•å…¥åŸºç¡€é…ç½®
    const webpackBase = require(&quot;./webpack.config.base&quot;);
    // å¼•å…¥ webpack-merge æ’ä»¶
    const webpackMerge = require(&quot;webpack-merge&quot;);
    // å¼•å…¥ webpack
    const webpack = require(&quot;webpack&quot;);
    // åˆå¹¶é…ç½®æ–‡ä»¶
    module.exports = webpackMerge(webpackBase,{
        plugins:[
            // ä»£ç å‹ç¼©
            new webpack.optimize.UglifyJsPlugin({
                // å¼€å¯ sourceMap
                sourceMap: true
            }),
            // æå–å…¬å…± JavaScript ä»£ç 
            new webpack.optimize.CommonsChunkPlugin({
                // chunk åä¸º commons
                name: &quot;commons&quot;,
                filename: &quot;[name].bundle.js&quot;,
            }),
        ]
    });
</code></pre><h2 id="webpack-config-lint-js"><a href="#webpack-config-lint-js" aria-hidden="true" class="header-anchor">#</a> webpack.config.lint.js</h2><pre><code>    const webpackBase = require(&quot;./webpack.config.base&quot;);
    const webpackMerge = require(&quot;webpack-merge&quot;);
    const config = require(&quot;./config&quot;);
    module.exports = webpackMerge(webpackBase,{
        module:{
            rules:[
                {
                    test: /\.js$/,
                    // å¼ºåˆ¶å…ˆè¿›è¡Œ ESLint æ£€æŸ¥
                    enforce: &quot;pre&quot;,
                    // ä¸å¯¹ node_modules å’Œ lib æ–‡ä»¶å¤¹ä¸­çš„ä»£ç è¿›è¡Œæ£€æŸ¥
                    exclude: /node_modules|lib/,
                    loader: &quot;eslint-loader&quot;,
                    options: {
                        // å¯ç”¨è‡ªåŠ¨ä¿®å¤
                        fix:true,
                        // å¯ç”¨è­¦å‘Šä¿¡æ¯
                        emitWarning:true,
                    }
                },
            ]
        },
        devServer:{
            contentBase:config.devServerOutputPath,
            overlay:{
                errors:true,
                warnings:true
            }
        }
    });
</code></pre><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" aria-hidden="true" class="header-anchor">#</a> é¡¹ç›®ç»“æ„</h2><pre><code>    â”‚  .babelrc
    â”‚  .eslintrc.js
    â”‚  .gitignore
    â”‚  package.json
    â”‚  postcss.config.js
    â”‚  webpack.config.js
    â”‚  
    â”œâ”€app
    â”‚  â”‚  favicon.ico
    â”‚  â”‚  
    â”‚  â”œâ”€css
    â”‚  â”‚      main.css
    â”‚  â”‚      
    â”‚  â”œâ”€html
    â”‚  â”‚      index.html
    â”‚  â”‚    
    â”‚  â”‚      
    â”‚  â”œâ”€img
    â”‚  â”‚      back.png
    â”‚  â”‚      
    â”‚  â”œâ”€js
    â”‚  â”‚      ajax.js
    â”‚  â”‚      footer.js
    â”‚  â”‚      index.js
    â”‚  â”‚      nav.js
    â”‚  â”‚      public.js
    â”‚  â”‚      tity_nav.js
    â”‚  â”‚      
    â”‚  â””â”€lib
    â”‚        flexible.js
    â”‚        normalize.css
    â”‚        swiper.css
    â”‚        swiper.js
    â”‚        
    â””â”€config
            config.js
            webpack.config.base.js
            webpack.config.dev.js
            webpack.config.lint.js
            webpack.config.prod.js
</code></pre><hr><hr><hr><hr><h2 id="æ³¨é‡Šï¼š"><a href="#æ³¨é‡Šï¼š" aria-hidden="true" class="header-anchor">#</a> æ³¨é‡Šï¼š</h2><h4 id="æƒ³å¼•ç”¨jqueryè€Œä¸æ˜¯æ¯ä¸ªé¡µé¢éƒ½å¼•ç”¨åªéœ€è¦ï¼š"><a href="#æƒ³å¼•ç”¨jqueryè€Œä¸æ˜¯æ¯ä¸ªé¡µé¢éƒ½å¼•ç”¨åªéœ€è¦ï¼š" aria-hidden="true" class="header-anchor">#</a> æƒ³å¼•ç”¨jqueryè€Œä¸æ˜¯æ¯ä¸ªé¡µé¢éƒ½å¼•ç”¨åªéœ€è¦ï¼š</h4><h4 id="å¼•å…¥jqueryåå¦‚æœå¼€å¯lintæ£€æŸ¥æ¨¡å¼-å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„å‰ææ˜¯æ¯ä¸ªé¡µé¢éƒ½require-ä¸€æ¬¡"><a href="#å¼•å…¥jqueryåå¦‚æœå¼€å¯lintæ£€æŸ¥æ¨¡å¼-å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„å‰ææ˜¯æ¯ä¸ªé¡µé¢éƒ½require-ä¸€æ¬¡" aria-hidden="true" class="header-anchor">#</a> å¼•å…¥jqueryåå¦‚æœå¼€å¯lintæ£€æŸ¥æ¨¡å¼ å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„å‰ææ˜¯æ¯ä¸ªé¡µé¢éƒ½require ä¸€æ¬¡</h4><ul><li><p>webpack.config.base.js</p><pre><code>  cnpm i jquery --save
  
  const ProvidePlugin = new webpack.ProvidePlugin({
    $: 'jquery',
    jQuery: 'jquery',
  });
</code></pre></li></ul><h4 id="å¼•å…¥sass"><a href="#å¼•å…¥sass" aria-hidden="true" class="header-anchor">#</a> å¼•å…¥sass</h4><ul><li><p>webpack.config.base.js</p><pre><code>  {
      // s?css =&gt; scssæˆ–è€…css
      test:/\.s?css$/,
      // ä¸å¤„ç† node_modules æ–‡ä»¶ä¸­çš„ css æ–‡ä»¶
      exclude: /node_modules/,
      // æŠ½å– css æ–‡ä»¶åˆ°å•ç‹¬çš„æ–‡ä»¶å¤¹
      use: ExtractTextPlugin.extract({
          fallback: &quot;style-loader&quot;,
          // è®¾ç½® css çš„ publicPath
          publicPath: config.cssPublicPath,//åœ¨ css ä¸­è®¾ç½®èƒŒæ™¯å›¾åƒçš„ url æ—¶ï¼Œç»å¸¸ä¼šæ‰¾ä¸åˆ°å›¾ç‰‡ï¼ˆé»˜è®¤ä¼šåœ¨ css æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾ï¼‰ï¼Œè¿™é‡Œè®¾ç½® extract-text-webpack-plugin æ’ä»¶çš„ publicPath ä¸ºå›¾ç‰‡æ–‡ä»¶å¤¹æ‰€åœ¨çš„ç›®å½•ï¼Œå°±å¯ä»¥é¡ºåˆ©æ‰¾åˆ°å›¾ç‰‡äº†
          use: [{
                  loader:&quot;css-loader&quot;,
                  options:{
                      // å¼€å¯ css å‹ç¼©
                      minimize:true,
                  }
              },
              {
                  loader:&quot;postcss-loader&quot;,
              },
              {
                  loader:&quot;sass-loader&quot;, 
                  //å¯ç”¨sass è™½ç„¶åœ¨è¿™åªå†™äº†sass-loader ä½†è¿˜è¦ä¸‹è½½node-sass
              }
          ]
      })
  },
</code></pre></li></ul><h4 id="å¦‚æœimportäº†ç±»ä¼¼swiperè¿™ç§åº“å‡½æ•°-ä½†ä¸å¤„ç†modulesé‡Œé¢çš„swiper-æ‰€ä»¥è¿™é‡Œè¦å…è®¸é™¤äº†node-modulesé‡Œé¢çš„swiperçš„å…¶ä»–æ‰€æœ‰æ–‡ä»¶"><a href="#å¦‚æœimportäº†ç±»ä¼¼swiperè¿™ç§åº“å‡½æ•°-ä½†ä¸å¤„ç†modulesé‡Œé¢çš„swiper-æ‰€ä»¥è¿™é‡Œè¦å…è®¸é™¤äº†node-modulesé‡Œé¢çš„swiperçš„å…¶ä»–æ‰€æœ‰æ–‡ä»¶" aria-hidden="true" class="header-anchor">#</a> å¦‚æœimportäº†ç±»ä¼¼swiperè¿™ç§åº“å‡½æ•° ä½†ä¸å¤„ç†modulesé‡Œé¢çš„swiper,æ‰€ä»¥è¿™é‡Œè¦å…è®¸é™¤äº†node_modulesé‡Œé¢çš„swiperçš„å…¶ä»–æ‰€æœ‰æ–‡ä»¶</h4><ul><li><p>webpack.config.base.js</p><pre><code>  {
      test: /\.js$/,
      exclude: /^node_modules*swiper$/, 
      use: {
          loader: 'babel-loader',
          options: {
              presets: ['env']
          }
      }
  },
</code></pre></li></ul></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        â† <a href="/catalog/study/" class="prev router-link-active">
          vuePressè¯´æ˜
        </a></span><span class="next"><a href="/catalog/study/Markdownå†™æ³•.html">
          Markdown è¯­æ³•
        </a> â†’
      </span></p></div></div></div></div>
    <script src="/assets/js/0.2f1ede6d.js" defer></script><script src="/assets/js/app.4c437b04.js" defer></script>
  </body>
</html>
